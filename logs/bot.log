2026-01-30 11:32:53,349 - bot - INFO - Starting bot...
2026-01-30 11:32:53,349 - asyncio - DEBUG - Using proactor: IocpProactor
2026-01-30 11:32:56,066 - bot - INFO - Bot is set up. Starting pooler process...
2026-01-30 11:32:56,079 - bot - ERROR - Failed to start pooler: f-string: unmatched ']' (download_pooler.py, line 177)
Traceback (most recent call last):
  File "D:\Projects\smart-downloader\src\bot.py", line 108, in startup_pooler
    from pooler_runner import start_pooler_process
  File "D:\Projects\smart-downloader\pooler_runner.py", line 19, in <module>
    from src.pooler.download_pooler import DownloadPooler
  File "D:\Projects\smart-downloader\src\pooler\__init__.py", line 8, in <module>
    from .download_pooler import DownloadPooler
  File "D:\Projects\smart-downloader\src\pooler\download_pooler.py", line 177
    logger.debug(f"  id={row[0]}, status={row[2]}, paused={row[3]}, priority={row[4]}, url={row[1][:40] if row[1] else 'None']}...")
                                                                                                                             ^
SyntaxError: f-string: unmatched ']'
2026-01-30 11:42:21,222 - bot - INFO - Starting bot...
2026-01-30 11:42:21,223 - asyncio - DEBUG - Using proactor: IocpProactor
2026-01-30 11:42:26,207 - bot - INFO - Bot is set up. Starting pooler process...
2026-01-30 11:42:26,284 - pooler_runner - INFO - Pooler process started (PID: 4700)
2026-01-30 11:42:26,285 - bot - INFO - Pooler started (PID: 4700)
2026-01-30 11:42:26,991 - pooler_runner - INFO - Starting pooler process...
2026-01-30 11:42:26,991 - pooler_runner - INFO - Database: smart_downloader.db
2026-01-30 11:42:26,992 - pooler_runner - INFO - Download dir: /tmp/downloads
2026-01-30 11:42:26,994 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7428103787:AAE213JD1aDfHtiM1lIEEPxdL2NnBIIli58
2026-01-30 11:42:26,995 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7428103787:AAE213JD1aDfHtiM1lIEEPxdL2NnBIIli58
2026-01-30 11:42:28,238 - src.pooler.download_pooler - INFO - DownloadPooler initialized
2026-01-30 11:42:28,239 - asyncio - DEBUG - Using proactor: IocpProactor
2026-01-30 11:42:28,240 - src.pooler.download_pooler - INFO - DownloadPooler started
2026-01-30 11:42:28,242 - src.download.direct_handler - INFO - DirectHandler initialized: max_quality=1080p, max_size=2GB
2026-01-30 11:42:28,243 - src.pooler.download_pooler - INFO - DirectHandler initialized
2026-01-30 11:42:28,483 - src.pooler.download_pooler - INFO - TorrentManager initialized
2026-01-30 11:42:28,485 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 11:42:28,486 - src.pooler.download_pooler - DEBUG - [POOLER] No uploads pending
2026-01-30 11:42:29,502 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 11:42:29,504 - src.pooler.download_pooler - DEBUG - [POOLER] No uploads pending
2026-01-30 11:42:30,511 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 11:42:30,513 - src.pooler.download_pooler - DEBUG - [POOLER] No uploads pending
2026-01-30 11:42:31,524 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 11:42:31,525 - src.pooler.download_pooler - DEBUG - [POOLER] No uploads pending
2026-01-30 11:42:32,532 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 11:42:32,534 - src.pooler.download_pooler - DEBUG - [POOLER] No uploads pending
2026-01-30 11:42:33,544 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 11:42:33,545 - src.pooler.download_pooler - DEBUG - [POOLER] No uploads pending
2026-01-30 11:42:34,550 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 11:42:34,553 - src.pooler.download_pooler - DEBUG - [POOLER] No uploads pending
2026-01-30 11:42:35,557 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 11:42:35,559 - src.pooler.download_pooler - DEBUG - [POOLER] No uploads pending
2026-01-30 11:42:35,722 - src.pooler.download_pooler - INFO - Received signal 2, initiating graceful shutdown...
2026-01-30 11:42:36,562 - src.pooler.download_pooler - INFO - Initiating graceful shutdown...
2026-01-30 11:42:36,563 - src.pooler.download_pooler - INFO - DownloadPooler shutdown complete
2026-01-30 11:42:36,565 - pooler_runner - INFO - Pooler process stopped
2026-01-30 11:42:40,917 - telegram.ext.Updater - ERROR - Error while calling `get_updates` one more time to mark all fetched updates. Suppressing error to ensure graceful shutdown. When polling for updates is restarted, updates may be fetched again. Please adjust timeouts via `ApplicationBuilder` or the parameter `get_updates_request` of `Bot`.
Traceback (most recent call last):
  File "D:\Projects\smart-downloader\.venv\Lib\site-packages\httpx\_transports\default.py", line 101, in map_httpcore_exceptions
    yield
  File "D:\Projects\smart-downloader\.venv\Lib\site-packages\httpx\_transports\default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\smart-downloader\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "D:\Projects\smart-downloader\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\smart-downloader\.venv\Lib\site-packages\httpcore\_async\connection.py", line 101, in handle_async_request
    raise exc
  File "D:\Projects\smart-downloader\.venv\Lib\site-packages\httpcore\_async\connection.py", line 78, in handle_async_request
    stream = await self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\smart-downloader\.venv\Lib\site-packages\httpcore\_async\connection.py", line 156, in _connect
    stream = await stream.start_tls(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\smart-downloader\.venv\Lib\site-packages\httpcore\_backends\anyio.py", line 67, in start_tls
    with map_exceptions(exc_map):
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.12_3.12.2800.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "D:\Projects\smart-downloader\.venv\Lib\site-packages\httpcore\_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Projects\smart-downloader\.venv\Lib\site-packages\telegram\request\_httpxrequest.py", line 279, in do_request
    res = await self._client.request(
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\smart-downloader\.venv\Lib\site-packages\httpx\_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\smart-downloader\.venv\Lib\site-packages\httpx\_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\smart-downloader\.venv\Lib\site-packages\httpx\_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\smart-downloader\.venv\Lib\site-packages\httpx\_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\smart-downloader\.venv\Lib\site-packages\httpx\_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\smart-downloader\.venv\Lib\site-packages\httpx\_transports\default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
         ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.12_3.12.2800.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "D:\Projects\smart-downloader\.venv\Lib\site-packages\httpx\_transports\default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Projects\smart-downloader\.venv\Lib\site-packages\telegram\ext\_updater.py", line 400, in _get_updates_cleanup
    await self.bot.get_updates(
  File "D:\Projects\smart-downloader\.venv\Lib\site-packages\telegram\ext\_extbot.py", line 671, in get_updates
    updates = await super().get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\smart-downloader\.venv\Lib\site-packages\telegram\_bot.py", line 4860, in get_updates
    await self._post(
  File "D:\Projects\smart-downloader\.venv\Lib\site-packages\telegram\_bot.py", line 703, in _post
    return await self._do_post(
           ^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\smart-downloader\.venv\Lib\site-packages\telegram\ext\_extbot.py", line 369, in _do_post
    return await super()._do_post(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\smart-downloader\.venv\Lib\site-packages\telegram\_bot.py", line 732, in _do_post
    result = await request.post(
             ^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\smart-downloader\.venv\Lib\site-packages\telegram\request\_baserequest.py", line 198, in post
    result = await self._request_wrapper(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\smart-downloader\.venv\Lib\site-packages\telegram\request\_baserequest.py", line 305, in _request_wrapper
    code, payload = await self.do_request(
                    ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\smart-downloader\.venv\Lib\site-packages\telegram\request\_httpxrequest.py", line 296, in do_request
    raise TimedOut from err
telegram.error.TimedOut: Timed out
2026-01-30 11:42:40,998 - bot - INFO - Shutting down pooler...
2026-01-30 11:42:40,999 - pooler_runner - INFO - Stopping pooler process...
2026-01-30 11:42:40,999 - pooler_runner - INFO - Pooler process stopped
2026-01-30 11:42:40,999 - bot - INFO - Pooler stopped
2026-01-30 11:48:45,690 - bot - INFO - Starting bot...
2026-01-30 11:48:45,691 - asyncio - DEBUG - Using proactor: IocpProactor
2026-01-30 11:48:49,409 - bot - INFO - Bot is set up. Starting pooler process...
2026-01-30 11:48:49,488 - pooler_runner - INFO - Pooler process started (PID: 7052)
2026-01-30 11:48:49,488 - bot - INFO - Pooler started (PID: 7052)
2026-01-30 11:48:50,145 - pooler_runner - INFO - Starting pooler process...
2026-01-30 11:48:50,145 - pooler_runner - INFO - Database: smart_downloader.db
2026-01-30 11:48:50,146 - pooler_runner - INFO - Download dir: /tmp/downloads
2026-01-30 11:48:54,139 - database.manager - INFO - Added priority column to downloads table
2026-01-30 11:48:54,356 - database.manager - INFO - Added can_pause column to downloads table
2026-01-30 11:48:54,573 - database.manager - INFO - Added paused column to downloads table
2026-01-30 11:48:54,789 - database.manager - INFO - Added pause_reason column to downloads table
2026-01-30 11:48:55,073 - database.manager - INFO - Added file_id column to downloads table
2026-01-30 11:48:55,290 - database.manager - INFO - Added file_path column to downloads table
2026-01-30 11:48:55,533 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7428103787:AAE213JD1aDfHtiM1lIEEPxdL2NnBIIli58
2026-01-30 11:48:55,534 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7428103787:AAE213JD1aDfHtiM1lIEEPxdL2NnBIIli58
2026-01-30 11:48:56,646 - src.pooler.download_pooler - INFO - DownloadPooler initialized
2026-01-30 11:48:56,646 - asyncio - DEBUG - Using proactor: IocpProactor
2026-01-30 11:48:56,648 - src.pooler.download_pooler - INFO - DownloadPooler started
2026-01-30 11:48:56,651 - src.download.direct_handler - INFO - DirectHandler initialized: max_quality=1080p, max_size=2GB
2026-01-30 11:48:56,651 - src.pooler.download_pooler - INFO - DirectHandler initialized
2026-01-30 11:48:56,908 - src.pooler.download_pooler - INFO - TorrentManager initialized
2026-01-30 11:48:56,910 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 11:48:56,911 - src.pooler.download_pooler - DEBUG - [POOLER] No uploads pending
2026-01-30 11:48:57,926 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 11:48:57,927 - src.pooler.download_pooler - DEBUG - [POOLER] No uploads pending
2026-01-30 11:48:58,932 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 11:48:58,936 - src.pooler.download_pooler - DEBUG - [POOLER] No uploads pending
2026-01-30 11:48:59,952 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 11:48:59,953 - src.pooler.download_pooler - DEBUG - [POOLER] No uploads pending
2026-01-30 11:49:00,967 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 11:49:00,970 - src.pooler.download_pooler - DEBUG - [POOLER] No uploads pending
2026-01-30 11:49:01,309 - src.pooler.download_pooler - INFO - Received signal 2, initiating graceful shutdown...
2026-01-30 11:49:01,971 - src.pooler.download_pooler - INFO - Initiating graceful shutdown...
2026-01-30 11:49:01,971 - src.pooler.download_pooler - INFO - DownloadPooler shutdown complete
2026-01-30 11:49:01,973 - pooler_runner - INFO - Pooler process stopped
2026-01-30 11:49:05,419 - bot - INFO - Shutting down pooler...
2026-01-30 11:49:05,419 - pooler_runner - INFO - Stopping pooler process...
2026-01-30 11:49:05,419 - pooler_runner - INFO - Pooler process stopped
2026-01-30 11:49:05,420 - bot - INFO - Pooler stopped
2026-01-30 11:51:49,275 - bot - INFO - Starting bot...
2026-01-30 11:51:49,276 - asyncio - DEBUG - Using proactor: IocpProactor
2026-01-30 11:51:50,840 - bot - INFO - Bot is set up. Starting pooler process...
2026-01-30 11:51:50,905 - pooler_runner - INFO - Pooler process started (PID: 12052)
2026-01-30 11:51:50,905 - bot - INFO - Pooler started (PID: 12052)
2026-01-30 11:51:51,579 - pooler_runner - INFO - Starting pooler process...
2026-01-30 11:51:51,579 - pooler_runner - INFO - Database: dev.db
2026-01-30 11:51:51,579 - pooler_runner - INFO - Download dir: /tmp/downloads
2026-01-30 11:51:51,582 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7428103787:AAE213JD1aDfHtiM1lIEEPxdL2NnBIIli58
2026-01-30 11:51:51,582 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7428103787:AAE213JD1aDfHtiM1lIEEPxdL2NnBIIli58
2026-01-30 11:51:52,627 - src.pooler.download_pooler - INFO - DownloadPooler initialized
2026-01-30 11:51:52,628 - asyncio - DEBUG - Using proactor: IocpProactor
2026-01-30 11:51:52,629 - src.pooler.download_pooler - INFO - DownloadPooler started
2026-01-30 11:51:52,631 - src.download.direct_handler - INFO - DirectHandler initialized: max_quality=1080p, max_size=2GB
2026-01-30 11:51:52,632 - src.pooler.download_pooler - INFO - DirectHandler initialized
2026-01-30 11:51:52,834 - src.pooler.download_pooler - INFO - TorrentManager initialized
2026-01-30 11:51:52,836 - src.pooler.download_pooler - INFO - [POOLER] Found pending download: id=13, url=https://raw.githubusercontent.com/TestFileHub/File...
2026-01-30 11:51:52,836 - src.pooler.download_pooler - INFO - Processing download 13: direct
2026-01-30 11:51:56,776 - src.download.direct_handler - INFO - Starting HTTP download: pdf20mb.pdf
2026-01-30 11:52:06,143 - handlers.dashboard - DEBUG - [DASHBOARD] callback: dm_open from chat_id=8007758080
2026-01-30 11:52:17,324 - handlers.dashboard - DEBUG - [DASHBOARD] callback: dm_refresh from chat_id=8007758080
2026-01-30 11:52:29,389 - src.download.direct_handler - INFO - HTTP download complete: /tmp/downloads\pdf20mb.pdf
2026-01-30 11:52:29,407 - handlers.dashboard - DEBUG - [DASHBOARD] callback: dm_refresh from chat_id=8007758080
2026-01-30 11:52:30,324 - src.pooler.download_pooler - INFO - Download complete: 13 -> /tmp/downloads\pdf20mb.pdf
2026-01-30 11:52:30,327 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 11:52:30,329 - src.pooler.download_pooler - INFO - [POOLER] Found completed upload: id=13
2026-01-30 11:52:30,329 - src.pooler.download_pooler - INFO - Processing upload 13: None
2026-01-30 11:52:30,330 - src.pooler.download_pooler - ERROR - Upload failed for 13: _path_exists: path should be string, bytes, os.PathLike or integer, not NoneType
2026-01-30 11:52:31,337 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 11:52:31,338 - src.pooler.download_pooler - INFO - [POOLER] Found completed upload: id=13
2026-01-30 11:52:31,339 - src.pooler.download_pooler - INFO - Processing upload 13: None
2026-01-30 11:52:31,339 - src.pooler.download_pooler - ERROR - Upload failed for 13: _path_exists: path should be string, bytes, os.PathLike or integer, not NoneType
2026-01-30 11:52:32,342 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 11:52:32,345 - src.pooler.download_pooler - INFO - [POOLER] Found completed upload: id=13
2026-01-30 11:52:32,345 - src.pooler.download_pooler - INFO - Processing upload 13: None
2026-01-30 11:52:32,346 - src.pooler.download_pooler - ERROR - Upload failed for 13: _path_exists: path should be string, bytes, os.PathLike or integer, not NoneType
2026-01-30 11:52:33,344 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 11:52:33,347 - src.pooler.download_pooler - INFO - [POOLER] Found completed upload: id=13
2026-01-30 11:52:33,348 - src.pooler.download_pooler - INFO - Processing upload 13: None
2026-01-30 11:52:33,348 - src.pooler.download_pooler - ERROR - Upload failed for 13: _path_exists: path should be string, bytes, os.PathLike or integer, not NoneType
2026-01-30 11:52:34,351 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 11:52:34,354 - src.pooler.download_pooler - INFO - [POOLER] Found completed upload: id=13
2026-01-30 11:52:34,354 - src.pooler.download_pooler - INFO - Processing upload 13: None
2026-01-30 11:52:34,355 - src.pooler.download_pooler - ERROR - Upload failed for 13: _path_exists: path should be string, bytes, os.PathLike or integer, not NoneType
2026-01-30 11:52:35,373 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 11:52:35,375 - src.pooler.download_pooler - INFO - [POOLER] Found completed upload: id=13
2026-01-30 11:52:35,376 - src.pooler.download_pooler - INFO - Processing upload 13: None
2026-01-30 11:52:35,377 - src.pooler.download_pooler - ERROR - Upload failed for 13: _path_exists: path should be string, bytes, os.PathLike or integer, not NoneType
2026-01-30 11:52:36,373 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 11:52:36,374 - src.pooler.download_pooler - INFO - [POOLER] Found completed upload: id=13
2026-01-30 11:52:36,374 - src.pooler.download_pooler - INFO - Processing upload 13: None
2026-01-30 11:52:36,375 - src.pooler.download_pooler - ERROR - Upload failed for 13: _path_exists: path should be string, bytes, os.PathLike or integer, not NoneType
2026-01-30 11:52:37,391 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 11:52:37,394 - src.pooler.download_pooler - INFO - [POOLER] Found completed upload: id=13
2026-01-30 11:52:37,394 - src.pooler.download_pooler - INFO - Processing upload 13: None
2026-01-30 11:52:37,395 - src.pooler.download_pooler - ERROR - Upload failed for 13: _path_exists: path should be string, bytes, os.PathLike or integer, not NoneType
2026-01-30 11:52:38,411 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 11:52:38,414 - src.pooler.download_pooler - INFO - [POOLER] Found completed upload: id=13
2026-01-30 11:52:38,415 - src.pooler.download_pooler - INFO - Processing upload 13: None
2026-01-30 11:52:38,415 - src.pooler.download_pooler - ERROR - Upload failed for 13: _path_exists: path should be string, bytes, os.PathLike or integer, not NoneType
2026-01-30 11:52:39,433 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 11:52:39,436 - src.pooler.download_pooler - INFO - [POOLER] Found completed upload: id=13
2026-01-30 11:52:39,437 - src.pooler.download_pooler - INFO - Processing upload 13: None
2026-01-30 11:52:39,437 - src.pooler.download_pooler - ERROR - Upload failed for 13: _path_exists: path should be string, bytes, os.PathLike or integer, not NoneType
2026-01-30 11:52:40,455 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 11:52:40,457 - src.pooler.download_pooler - INFO - [POOLER] Found completed upload: id=13
2026-01-30 11:52:40,458 - src.pooler.download_pooler - INFO - Processing upload 13: None
2026-01-30 11:52:40,459 - src.pooler.download_pooler - ERROR - Upload failed for 13: _path_exists: path should be string, bytes, os.PathLike or integer, not NoneType
2026-01-30 11:52:40,603 - src.pooler.download_pooler - INFO - Received signal 2, initiating graceful shutdown...
2026-01-30 11:52:41,228 - bot - INFO - Shutting down pooler...
2026-01-30 11:52:41,229 - pooler_runner - INFO - Stopping pooler process...
2026-01-30 11:52:41,241 - pooler_runner - INFO - Pooler process stopped
2026-01-30 11:52:41,242 - bot - INFO - Pooler stopped
2026-01-30 11:59:11,760 - bot - INFO - Starting bot...
2026-01-30 11:59:11,762 - asyncio - DEBUG - Using proactor: IocpProactor
2026-01-30 11:59:12,577 - bot - INFO - Bot is set up. Starting pooler process...
2026-01-30 11:59:12,655 - src.pooler.pooler_runner - INFO - Pooler process started (PID: 12876)
2026-01-30 11:59:12,655 - bot - INFO - Pooler started (PID: 12876)
2026-01-30 11:59:13,502 - src.pooler.pooler_runner - INFO - Starting pooler process...
2026-01-30 11:59:13,503 - src.pooler.pooler_runner - INFO - Database: dev.db
2026-01-30 11:59:13,503 - src.pooler.pooler_runner - INFO - Download dir: /downloads
2026-01-30 11:59:13,507 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7428103787:AAE213JD1aDfHtiM1lIEEPxdL2NnBIIli58
2026-01-30 11:59:13,508 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7428103787:AAE213JD1aDfHtiM1lIEEPxdL2NnBIIli58
2026-01-30 11:59:14,903 - src.pooler.download_pooler - INFO - DownloadPooler initialized
2026-01-30 11:59:14,904 - asyncio - DEBUG - Using proactor: IocpProactor
2026-01-30 11:59:14,906 - src.pooler.download_pooler - INFO - DownloadPooler started
2026-01-30 11:59:14,908 - src.download.direct_handler - INFO - DirectHandler initialized: max_quality=1080p, max_size=2GB
2026-01-30 11:59:14,908 - src.pooler.download_pooler - INFO - DirectHandler initialized
2026-01-30 11:59:15,131 - src.pooler.download_pooler - INFO - TorrentManager initialized
2026-01-30 11:59:15,146 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 11:59:15,146 - src.pooler.download_pooler - INFO - [POOLER] Found completed upload: id=13
2026-01-30 11:59:15,146 - src.pooler.download_pooler - INFO - Processing upload 13: None
2026-01-30 11:59:15,146 - src.pooler.download_pooler - ERROR - Upload failed for 13: _path_exists: path should be string, bytes, os.PathLike or integer, not NoneType
2026-01-30 11:59:16,156 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 11:59:16,156 - src.pooler.download_pooler - INFO - [POOLER] Found completed upload: id=13
2026-01-30 11:59:16,156 - src.pooler.download_pooler - INFO - Processing upload 13: None
2026-01-30 11:59:16,156 - src.pooler.download_pooler - ERROR - Upload failed for 13: _path_exists: path should be string, bytes, os.PathLike or integer, not NoneType
2026-01-30 11:59:17,171 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 11:59:17,172 - src.pooler.download_pooler - INFO - [POOLER] Found completed upload: id=13
2026-01-30 11:59:17,173 - src.pooler.download_pooler - INFO - Processing upload 13: None
2026-01-30 11:59:17,173 - src.pooler.download_pooler - ERROR - Upload failed for 13: _path_exists: path should be string, bytes, os.PathLike or integer, not NoneType
2026-01-30 11:59:18,160 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 11:59:18,161 - src.pooler.download_pooler - INFO - [POOLER] Found completed upload: id=13
2026-01-30 11:59:18,161 - src.pooler.download_pooler - INFO - Processing upload 13: None
2026-01-30 11:59:18,162 - src.pooler.download_pooler - ERROR - Upload failed for 13: _path_exists: path should be string, bytes, os.PathLike or integer, not NoneType
2026-01-30 11:59:19,164 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 11:59:19,166 - src.pooler.download_pooler - INFO - [POOLER] Found completed upload: id=13
2026-01-30 11:59:19,166 - src.pooler.download_pooler - INFO - Processing upload 13: None
2026-01-30 11:59:19,166 - src.pooler.download_pooler - ERROR - Upload failed for 13: _path_exists: path should be string, bytes, os.PathLike or integer, not NoneType
2026-01-30 11:59:20,105 - src.pooler.download_pooler - INFO - Received signal 2, initiating graceful shutdown...
2026-01-30 11:59:20,181 - src.pooler.download_pooler - INFO - Initiating graceful shutdown...
2026-01-30 11:59:20,181 - src.pooler.download_pooler - INFO - DownloadPooler shutdown complete
2026-01-30 11:59:20,182 - src.pooler.pooler_runner - INFO - Pooler process stopped
2026-01-30 11:59:20,695 - bot - INFO - Shutting down pooler...
2026-01-30 11:59:20,697 - bot - ERROR - Failed to stop pooler: No module named 'pooler_runner'
2026-01-30 12:03:51,988 - bot - INFO - Starting bot...
2026-01-30 12:03:51,988 - asyncio - DEBUG - Using proactor: IocpProactor
2026-01-30 12:03:52,732 - bot - INFO - Bot is set up. Starting pooler process...
2026-01-30 12:03:52,802 - src.pooler.pooler_runner - INFO - Pooler process started (PID: 5084)
2026-01-30 12:03:52,803 - bot - INFO - Pooler started (PID: 5084)
2026-01-30 12:03:53,452 - src.pooler.pooler_runner - INFO - Starting pooler process...
2026-01-30 12:03:53,452 - src.pooler.pooler_runner - INFO - Database: dev.db
2026-01-30 12:03:53,452 - src.pooler.pooler_runner - INFO - Download dir: /downloads
2026-01-30 12:03:53,465 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7428103787:AAE213JD1aDfHtiM1lIEEPxdL2NnBIIli58
2026-01-30 12:03:53,465 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7428103787:AAE213JD1aDfHtiM1lIEEPxdL2NnBIIli58
2026-01-30 12:03:54,699 - src.pooler.download_pooler - INFO - DownloadPooler initialized
2026-01-30 12:03:54,699 - asyncio - DEBUG - Using proactor: IocpProactor
2026-01-30 12:03:54,699 - src.pooler.download_pooler - INFO - DownloadPooler started
2026-01-30 12:03:54,699 - src.download.direct_handler - INFO - DirectHandler initialized: max_quality=1080p, max_size=2GB
2026-01-30 12:03:54,699 - src.pooler.download_pooler - INFO - DirectHandler initialized
2026-01-30 12:03:54,898 - src.pooler.download_pooler - INFO - TorrentManager initialized
2026-01-30 12:03:54,898 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:03:54,898 - src.pooler.download_pooler - DEBUG - [POOLER] No uploads pending
2026-01-30 12:03:55,902 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:03:55,904 - src.pooler.download_pooler - DEBUG - [POOLER] No uploads pending
2026-01-30 12:03:56,913 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:03:56,915 - src.pooler.download_pooler - DEBUG - [POOLER] No uploads pending
2026-01-30 12:03:57,927 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:03:57,929 - src.pooler.download_pooler - DEBUG - [POOLER] No uploads pending
2026-01-30 12:03:58,941 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:03:58,944 - src.pooler.download_pooler - DEBUG - [POOLER] No uploads pending
2026-01-30 12:03:59,150 - handlers.dashboard - DEBUG - [DASHBOARD] callback: dashboard_new_download from chat_id=8007758080
2026-01-30 12:03:59,543 - handlers.newurls - INFO - Activated new URL submission mode for chat_id=8007758080
2026-01-30 12:03:59,947 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:03:59,949 - src.pooler.download_pooler - DEBUG - [POOLER] No uploads pending
2026-01-30 12:04:00,963 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:04:00,966 - src.pooler.download_pooler - DEBUG - [POOLER] No uploads pending
2026-01-30 12:04:01,413 - handlers.newurls - DEBUG - New URL submission received: chat_id=8007758080, text='https://raw.githubusercontent.com/TestFileHub/File...'
2026-01-30 12:04:01,414 - download.url_detector - DEBUG - URL type: direct (file extension)
2026-01-30 12:04:01,414 - handlers.newurls - INFO - Adding to queue: url='https://raw.githubusercontent.com/TestFileHub/File...', source=direct, chat_id=8007758080
2026-01-30 12:04:01,788 - handlers.newurls - INFO - Added to queue: queue_id=14
2026-01-30 12:04:02,057 - src.pooler.download_pooler - INFO - [POOLER] Found pending download: id=14, url=https://raw.githubusercontent.com/TestFileHub/File...
2026-01-30 12:04:02,058 - src.pooler.download_pooler - INFO - Processing download 14: direct
2026-01-30 12:04:03,554 - src.download.direct_handler - INFO - Starting HTTP download: pdf20mb.pdf
2026-01-30 12:04:05,774 - handlers.newurls - INFO - Exited new URL submission mode for chat_id=8007758080
2026-01-30 12:04:23,198 - src.download.direct_handler - INFO - HTTP download complete: /downloads\pdf20mb.pdf
2026-01-30 12:04:23,573 - handlers.dashboard - DEBUG - [DASHBOARD] callback: dm_refresh from chat_id=8007758080
2026-01-30 12:04:24,424 - src.pooler.download_pooler - INFO - Download complete: 14 -> /downloads\pdf20mb.pdf
2026-01-30 12:04:24,428 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:04:24,432 - src.pooler.download_pooler - INFO - [POOLER] Found completed upload: id=14
2026-01-30 12:04:24,433 - src.pooler.download_pooler - INFO - Processing upload 14: /downloads\pdf20mb.pdf
2026-01-30 12:04:24,716 - src.pooler.upload_handler - INFO - Uploading /downloads\pdf20mb.pdf (20.0 MB)
2026-01-30 12:04:25,048 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendDocument` with parameters `{'chat_id': 8007758080, 'document': <telegram._files.inputfile.InputFile object at 0x0000022D3435FF80>, 'caption': 'Downloaded via Smart Downloader'}`
2026-01-30 12:04:25,442 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:04:26,447 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:04:27,461 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:04:28,465 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:04:29,482 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:04:30,488 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:04:31,489 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:04:32,496 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:04:33,509 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:04:34,526 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:04:35,536 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:04:36,539 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:04:37,554 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:04:38,560 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:04:39,566 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:04:40,568 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:04:41,571 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:04:42,575 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:04:43,582 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:04:44,585 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:04:45,588 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:04:46,589 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:04:47,602 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:04:48,620 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:04:49,630 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:04:50,638 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:04:51,647 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:04:52,650 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:04:53,656 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:04:54,052 - src.pooler.download_pooler - INFO - Received signal 2, initiating graceful shutdown...
2026-01-30 12:04:54,649 - src.pooler.download_pooler - INFO - Initiating graceful shutdown...
2026-01-30 12:04:54,649 - src.pooler.download_pooler - INFO - Waiting for upload 14 to complete...
2026-01-30 12:04:57,674 - bot - INFO - Shutting down pooler...
2026-01-30 12:04:57,677 - bot - ERROR - Failed to stop pooler: No module named 'pooler_runner'
2026-01-30 12:05:36,231 - telegram.Bot - DEBUG - Call to Bot API endpoint `sendDocument` finished with return value `{'message_id': 536, 'from': {'id': 7428103787, 'is_bot': True, 'first_name': 'File Downloader', 'username': 'LakshanDownbot'}, 'chat': {'id': 8007758080, 'first_name': 'Lakshan', 'last_name': 'De Silva', 'username': 'lakshan_desilva', 'type': 'private'}, 'date': 1769754935, 'document': {'file_name': 'pdf20mb.pdf', 'mime_type': 'application/pdf', 'file_id': 'BQACAgUAAxkDAAICGGl8UTek7FSptgd47hmrVYHoeUr7AAKVGQACFIrhV5ELRnp1uAYbOAQ', 'file_unique_id': 'AgADlRkAAhSK4Vc', 'file_size': 20947279}, 'caption': 'Downloaded via Smart Downloader'}`
2026-01-30 12:05:36,534 - src.pooler.upload_handler - INFO - Upload complete: 14 -> BQACAgUAAxkDAAICGGl8UTek7FSptgd47hmrVYHoeUr7AAKVGQACFIrhV5ELRnp1uAYbOAQ
2026-01-30 12:05:36,548 - src.pooler.upload_handler - INFO - Deleted local file: /downloads\pdf20mb.pdf
2026-01-30 12:05:36,548 - src.pooler.upload_handler - INFO - Removed empty directory: /downloads
2026-01-30 12:05:36,548 - src.pooler.download_pooler - INFO - Upload complete: 14 -> BQACAgUAAxkDAAICGGl8UTek7FSptgd47hmrVYHoeUr7AAKVGQACFIrhV5ELRnp1uAYbOAQ
2026-01-30 12:05:36,557 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 8007758080, 'text': '\n✅ **Upload Complete**\n\nNone\n\nCheck your saved messages!\n        ', 'parse_mode': 'Markdown'}`
2026-01-30 12:05:36,947 - telegram.Bot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 537, 'from': {'id': 7428103787, 'is_bot': True, 'first_name': 'File Downloader', 'username': 'LakshanDownbot'}, 'chat': {'id': 8007758080, 'first_name': 'Lakshan', 'last_name': 'De Silva', 'username': 'lakshan_desilva', 'type': 'private'}, 'date': 1769754936, 'text': '✅ Upload Complete\n\nNone\n\nCheck your saved messages!'}`
2026-01-30 12:05:37,962 - src.pooler.download_pooler - INFO - DownloadPooler shutdown complete
2026-01-30 12:05:37,966 - src.pooler.pooler_runner - INFO - Pooler process stopped
2026-01-30 12:07:11,961 - bot - INFO - Starting bot...
2026-01-30 12:07:11,962 - asyncio - DEBUG - Using proactor: IocpProactor
2026-01-30 12:07:12,797 - bot - INFO - Bot is set up. Starting pooler process...
2026-01-30 12:07:12,885 - src.pooler.pooler_runner - INFO - Pooler process started (PID: 2524)
2026-01-30 12:07:12,886 - bot - INFO - Pooler started (PID: 2524)
2026-01-30 12:07:13,674 - src.pooler.pooler_runner - INFO - Starting pooler process...
2026-01-30 12:07:13,675 - src.pooler.pooler_runner - INFO - Database: dev.db
2026-01-30 12:07:13,675 - src.pooler.pooler_runner - INFO - Download dir: /downloads
2026-01-30 12:07:13,678 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7428103787:AAE213JD1aDfHtiM1lIEEPxdL2NnBIIli58
2026-01-30 12:07:13,679 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7428103787:AAE213JD1aDfHtiM1lIEEPxdL2NnBIIli58
2026-01-30 12:07:15,028 - src.pooler.download_pooler - INFO - DownloadPooler initialized
2026-01-30 12:07:15,029 - asyncio - DEBUG - Using proactor: IocpProactor
2026-01-30 12:07:15,030 - src.pooler.download_pooler - INFO - DownloadPooler started
2026-01-30 12:07:15,033 - src.download.direct_handler - INFO - DirectHandler initialized: max_quality=1080p, max_size=2GB
2026-01-30 12:07:15,033 - src.pooler.download_pooler - INFO - DirectHandler initialized
2026-01-30 12:07:15,242 - src.pooler.download_pooler - INFO - TorrentManager initialized
2026-01-30 12:07:15,242 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:07:15,242 - src.pooler.download_pooler - DEBUG - [POOLER] No uploads pending
2026-01-30 12:07:16,246 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:07:16,248 - src.pooler.download_pooler - DEBUG - [POOLER] No uploads pending
2026-01-30 12:07:17,265 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:07:17,267 - src.pooler.download_pooler - DEBUG - [POOLER] No uploads pending
2026-01-30 12:07:18,280 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:07:18,282 - src.pooler.download_pooler - DEBUG - [POOLER] No uploads pending
2026-01-30 12:07:19,283 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:07:19,283 - src.pooler.download_pooler - DEBUG - [POOLER] No uploads pending
2026-01-30 12:07:20,298 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:07:20,300 - src.pooler.download_pooler - DEBUG - [POOLER] No uploads pending
2026-01-30 12:07:21,318 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:07:21,320 - src.pooler.download_pooler - DEBUG - [POOLER] No uploads pending
2026-01-30 12:07:22,338 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:07:22,340 - src.pooler.download_pooler - DEBUG - [POOLER] No uploads pending
2026-01-30 12:07:23,346 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:07:23,348 - src.pooler.download_pooler - DEBUG - [POOLER] No uploads pending
2026-01-30 12:07:24,348 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:07:24,348 - src.pooler.download_pooler - DEBUG - [POOLER] No uploads pending
2026-01-30 12:07:25,352 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:07:25,353 - src.pooler.download_pooler - DEBUG - [POOLER] No uploads pending
2026-01-30 12:07:26,364 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:07:26,365 - src.pooler.download_pooler - DEBUG - [POOLER] No uploads pending
2026-01-30 12:07:27,370 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:07:27,372 - src.pooler.download_pooler - DEBUG - [POOLER] No uploads pending
2026-01-30 12:07:28,385 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:07:28,386 - src.pooler.download_pooler - DEBUG - [POOLER] No uploads pending
2026-01-30 12:07:29,399 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:07:29,400 - src.pooler.download_pooler - DEBUG - [POOLER] No uploads pending
2026-01-30 12:07:30,414 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:07:30,415 - src.pooler.download_pooler - DEBUG - [POOLER] No uploads pending
2026-01-30 12:07:31,424 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:07:31,426 - src.pooler.download_pooler - DEBUG - [POOLER] No uploads pending
2026-01-30 12:07:32,442 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:07:32,444 - src.pooler.download_pooler - DEBUG - [POOLER] No uploads pending
2026-01-30 12:07:33,459 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:07:33,461 - src.pooler.download_pooler - DEBUG - [POOLER] No uploads pending
2026-01-30 12:07:34,468 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:07:34,470 - src.pooler.download_pooler - DEBUG - [POOLER] No uploads pending
2026-01-30 12:07:35,486 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:07:35,487 - src.pooler.download_pooler - DEBUG - [POOLER] No uploads pending
2026-01-30 12:07:36,503 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:07:36,504 - src.pooler.download_pooler - DEBUG - [POOLER] No uploads pending
2026-01-30 12:07:37,515 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:07:37,516 - src.pooler.download_pooler - DEBUG - [POOLER] No uploads pending
2026-01-30 12:07:38,528 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:07:38,528 - src.pooler.download_pooler - DEBUG - [POOLER] No uploads pending
2026-01-30 12:07:39,534 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:07:39,536 - src.pooler.download_pooler - DEBUG - [POOLER] No uploads pending
2026-01-30 12:07:40,544 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:07:40,546 - src.pooler.download_pooler - DEBUG - [POOLER] No uploads pending
2026-01-30 12:07:41,564 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:07:41,566 - src.pooler.download_pooler - DEBUG - [POOLER] No uploads pending
2026-01-30 12:07:42,583 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:07:42,584 - src.pooler.download_pooler - DEBUG - [POOLER] No uploads pending
2026-01-30 12:07:43,595 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:07:43,595 - src.pooler.download_pooler - DEBUG - [POOLER] No uploads pending
2026-01-30 12:07:44,606 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:07:44,608 - src.pooler.download_pooler - DEBUG - [POOLER] No uploads pending
2026-01-30 12:07:45,616 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:07:45,618 - src.pooler.download_pooler - DEBUG - [POOLER] No uploads pending
2026-01-30 12:07:46,634 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:07:46,636 - src.pooler.download_pooler - DEBUG - [POOLER] No uploads pending
2026-01-30 12:07:47,653 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:07:47,655 - src.pooler.download_pooler - DEBUG - [POOLER] No uploads pending
2026-01-30 12:07:48,669 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:07:48,670 - src.pooler.download_pooler - DEBUG - [POOLER] No uploads pending
2026-01-30 12:07:49,680 - src.pooler.download_pooler - DEBUG - [POOLER] No pending downloads found
2026-01-30 12:07:49,680 - src.pooler.download_pooler - DEBUG - [POOLER] No uploads pending
2026-01-30 12:07:50,073 - src.pooler.download_pooler - INFO - Received signal 2, initiating graceful shutdown...
2026-01-30 12:07:50,233 - src.pooler.download_pooler - INFO - Received signal 2, initiating graceful shutdown...
2026-01-30 12:07:50,689 - src.pooler.download_pooler - INFO - Initiating graceful shutdown...
2026-01-30 12:07:50,689 - src.pooler.download_pooler - INFO - DownloadPooler shutdown complete
2026-01-30 12:07:50,689 - src.pooler.pooler_runner - INFO - Pooler process stopped
2026-01-30 12:11:23,971 - bot - INFO - Starting bot...
2026-01-30 12:11:23,971 - asyncio - DEBUG - Using proactor: IocpProactor
2026-01-30 12:11:24,767 - bot - INFO - Bot is set up. Starting pooler process...
2026-01-30 12:11:24,829 - src.pooler.pooler_runner - INFO - Pooler process started (PID: 15048)
2026-01-30 12:11:24,829 - bot - INFO - Pooler started (PID: 15048)
2026-01-30 12:11:25,487 - src.pooler.pooler_runner - INFO - Starting pooler process...
2026-01-30 12:11:25,487 - src.pooler.pooler_runner - INFO - Database: dev.db
2026-01-30 12:11:25,487 - src.pooler.pooler_runner - INFO - Download dir: /downloads
2026-01-30 12:11:25,487 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7428103787:AAE213JD1aDfHtiM1lIEEPxdL2NnBIIli58
2026-01-30 12:11:25,503 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7428103787:AAE213JD1aDfHtiM1lIEEPxdL2NnBIIli58
2026-01-30 12:11:26,553 - src.pooler.download_pooler - INFO - DownloadPooler initialized
2026-01-30 12:11:26,553 - asyncio - DEBUG - Using proactor: IocpProactor
2026-01-30 12:11:26,553 - src.pooler.download_pooler - INFO - DownloadPooler started
2026-01-30 12:11:26,553 - src.download.direct_handler - INFO - DirectHandler initialized: max_quality=1080p, max_size=2GB
2026-01-30 12:11:26,553 - src.pooler.download_pooler - INFO - DirectHandler initialized
2026-01-30 12:11:26,762 - src.pooler.download_pooler - INFO - TorrentManager initialized
2026-01-30 12:11:45,816 - handlers.dashboard - DEBUG - [DASHBOARD] callback: dashboard_new_download from chat_id=8007758080
2026-01-30 12:11:46,173 - handlers.newurls - INFO - Activated new URL submission mode for chat_id=8007758080
2026-01-30 12:11:48,768 - handlers.newurls - DEBUG - New URL submission received: chat_id=8007758080, text='Import "pooler_runner" could not be resolved...'
2026-01-30 12:11:48,768 - download.url_detector - WARNING - Invalid URL format: Import "pooler_runner" could not be resolved
2026-01-30 12:11:54,850 - handlers.newurls - DEBUG - New URL submission received: chat_id=8007758080, text='https://abxxx.com/video/505733/tied-and-fucked-har...'
2026-01-30 12:11:56,399 - download.url_detector - DEBUG - Loaded 1854 yt-dlp extractors
2026-01-30 12:11:56,401 - download.url_detector - DEBUG - URL type: playwright (unsupported video site)
2026-01-30 12:11:56,401 - handlers.newurls - INFO - Adding to queue: url='https://abxxx.com/video/505733/tied-and-fucked-har...', source=playwright, chat_id=8007758080
2026-01-30 12:11:56,746 - handlers.newurls - INFO - Added to queue: queue_id=15
2026-01-30 12:11:57,072 - src.pooler.download_pooler - INFO - Processing download 15: playwright
2026-01-30 12:11:57,354 - src.pooler.download_pooler - ERROR - Download failed for 15: Unknown source: playwright
2026-01-30 12:11:57,663 - src.pooler.retry_handler - INFO - Download 15 failed (attempt 1/3): Unknown source: playwright
2026-01-30 12:11:57,664 - src.pooler.retry_handler - INFO - Retrying download 15 in 120s...
2026-01-30 12:12:00,718 - handlers.newurls - INFO - Exited new URL submission mode for chat_id=8007758080
2026-01-30 12:12:14,918 - handlers.dashboard - DEBUG - [DASHBOARD] callback: dm_refresh from chat_id=8007758080
2026-01-30 12:13:58,014 - src.pooler.download_pooler - INFO - Processing download 15: playwright
2026-01-30 12:13:58,333 - src.pooler.download_pooler - ERROR - Download failed for 15: Unknown source: playwright
2026-01-30 12:13:58,567 - src.pooler.retry_handler - INFO - Download 15 failed (attempt 2/3): Unknown source: playwright
2026-01-30 12:13:58,568 - src.pooler.retry_handler - INFO - Retrying download 15 in 240s...
2026-01-30 12:14:04,201 - src.pooler.download_pooler - INFO - Received signal 2, initiating graceful shutdown...
2026-01-30 12:14:04,833 - bot - INFO - Shutting down pooler...
2026-01-30 12:14:04,834 - src.pooler.pooler_runner - INFO - Stopping pooler process...
2026-01-30 12:14:04,842 - src.pooler.pooler_runner - INFO - Pooler process stopped
2026-01-30 12:14:04,843 - bot - INFO - Pooler stopped
2026-01-30 12:54:15,909 - bot - INFO - Starting bot...
2026-01-30 12:54:15,910 - asyncio - DEBUG - Using proactor: IocpProactor
2026-01-30 12:54:16,738 - bot - INFO - Bot is set up. Starting pooler process...
2026-01-30 12:54:16,827 - src.pooler.pooler_runner - INFO - Pooler process started (PID: 16280)
2026-01-30 12:54:16,827 - bot - INFO - Pooler started (PID: 16280)
2026-01-30 12:54:17,660 - src.pooler.pooler_runner - INFO - Starting pooler process...
2026-01-30 12:54:17,661 - src.pooler.pooler_runner - INFO - Database: dev.db
2026-01-30 12:54:17,661 - src.pooler.pooler_runner - INFO - Download dir: /downloads
2026-01-30 12:54:17,664 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7428103787:AAE213JD1aDfHtiM1lIEEPxdL2NnBIIli58
2026-01-30 12:54:17,665 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7428103787:AAE213JD1aDfHtiM1lIEEPxdL2NnBIIli58
2026-01-30 12:54:18,762 - src.pooler.download_pooler - INFO - DownloadPooler initialized
2026-01-30 12:54:18,763 - asyncio - DEBUG - Using proactor: IocpProactor
2026-01-30 12:54:18,764 - src.pooler.download_pooler - INFO - DownloadPooler started
2026-01-30 12:54:18,980 - src.download.direct_downloader - INFO - DirectDownloader: aria2c connected to http://localhost:6800/jsonrpc
2026-01-30 12:54:18,980 - src.pooler.download_pooler - INFO - DirectDownloader initialized
2026-01-30 12:54:18,980 - src.pooler.download_pooler - INFO - TorrentManager initialized
2026-01-30 12:54:31,303 - handlers.dashboard - DEBUG - [DASHBOARD] callback: dm_refresh from chat_id=8007758080
2026-01-30 12:55:05,451 - handlers.dashboard - DEBUG - [DASHBOARD] callback: dm_cancel_15 from chat_id=8007758080
2026-01-30 12:55:06,489 - handlers.downloads - INFO - Cancelled download 15
2026-01-30 12:55:09,246 - handlers.dashboard - DEBUG - [DASHBOARD] callback: dashboard_new_download from chat_id=8007758080
2026-01-30 12:55:09,626 - handlers.newurls - INFO - Activated new URL submission mode for chat_id=8007758080
2026-01-30 12:55:43,113 - handlers.newurls - DEBUG - New URL submission received: chat_id=8007758080, text='https://abxxx.com/video/505733/tied-and-fucked-har...'
2026-01-30 12:55:43,592 - download.url_detector - DEBUG - Loaded 1854 yt-dlp extractors
2026-01-30 12:55:43,595 - download.url_detector - DEBUG - URL type: playwright (unsupported video site)
2026-01-30 12:55:43,595 - handlers.newurls - INFO - Adding to queue: url='https://abxxx.com/video/505733/tied-and-fucked-har...', source=playwright, chat_id=8007758080
2026-01-30 12:55:43,943 - handlers.newurls - INFO - Added to queue: queue_id=16
2026-01-30 12:55:44,372 - src.pooler.download_pooler - INFO - Processing download 16: playwright
2026-01-30 12:55:44,933 - src.download.direct_downloader - INFO - Crawling page: https://abxxx.com/video/505733/tied-and-fucked-hard-by-two/
2026-01-30 12:55:44,933 - src.crawler.video_detector - INFO - VideoDetector initialized with max_quality=1080p, max_size=2GB
2026-01-30 12:55:44,933 - src.crawler.playwright_crawler - INFO - PlaywrightCrawler initialized with max_quality=1080p
2026-01-30 12:55:59,990 - src.crawler.browser_manager - INFO - Playwright browser launched
2026-01-30 12:56:00,081 - src.crawler.browser_manager - INFO - Created context for chat 8007758080
2026-01-30 12:56:01,581 - src.crawler.playwright_crawler - INFO - Navigating to: https://abxxx.com/video/505733/tied-and-fucked-hard-by-two/
2026-01-30 12:56:11,268 - src.crawler.playwright_crawler - DEBUG - Found video player with selector: video
2026-01-30 12:56:12,158 - src.crawler.network_monitor - DEBUG - Captured video URL: https://s3t3d2y1.afcdn.net/library/900752/299c242d35739e14951c55c9a9a92780be790e
2026-01-30 12:56:12,290 - src.crawler.network_monitor - DEBUG - Captured video URL: https://s3t3d2y1.afcdn.net/library/900752/299c242d35739e14951c55c9a9a92780be790e
2026-01-30 12:56:12,361 - src.crawler.network_monitor - DEBUG - Captured video URL: https://s3t3d2y1.afcdn.net/library/900752/fd94429f3f03da658031baf9e4c8ab0080788c
2026-01-30 12:56:12,436 - src.crawler.network_monitor - DEBUG - Captured video URL: https://ip385403278.ahcdn.com/key=-v3ogjoPDETgfPDw+r9XVQ,s=,end=1769844370,limit
2026-01-30 12:56:12,498 - src.crawler.network_monitor - DEBUG - Captured video URL: https://s3t3d2y1.afcdn.net/library/900752/299c242d35739e14951c55c9a9a92780be790e
2026-01-30 12:56:12,610 - src.crawler.network_monitor - DEBUG - Captured video URL: https://s3t3d2y1.afcdn.net/library/900752/299c242d35739e14951c55c9a9a92780be790e
2026-01-30 12:56:12,726 - src.crawler.network_monitor - DEBUG - Captured video URL: https://s3t3d2y1.afcdn.net/library/900752/299c242d35739e14951c55c9a9a92780be790e
2026-01-30 12:56:12,727 - src.crawler.network_monitor - DEBUG - Captured video URL: https://s3t3d2y1.afcdn.net/library/141372/70aa7c226bd8bccf849ae4ef57c9e8cd1e8a54
2026-01-30 12:56:12,813 - src.crawler.network_monitor - DEBUG - Captured video URL: https://s3t3d2y1.afcdn.net/library/900752/299c242d35739e14951c55c9a9a92780be790e
2026-01-30 12:56:12,929 - src.crawler.network_monitor - DEBUG - Captured video URL: https://s3t3d2y1.afcdn.net/library/900752/299c242d35739e14951c55c9a9a92780be790e
2026-01-30 12:56:12,957 - handlers.newurls - INFO - Exited new URL submission mode for chat_id=8007758080
2026-01-30 12:56:14,288 - src.crawler.playwright_crawler - INFO - Found 10 video URL candidates
2026-01-30 12:56:14,288 - src.crawler.video_detector - DEBUG - File too small: 207684 bytes
2026-01-30 12:56:14,289 - src.crawler.video_detector - INFO - Filtered out likely ad: https://s3t3d2y1.afcdn.net/library/141372/70aa7c226bd8bccf84
2026-01-30 12:56:14,289 - src.crawler.video_detector - INFO - Selected best video: 76MB - https://ip385403278.ahcdn.com/key=-v3ogjoPDETgfPDw+r9XVQ,s=,
2026-01-30 12:56:14,290 - src.crawler.playwright_crawler - INFO - Selected real video: https://ip385403278.ahcdn.com/key=-v3ogjoPDETgfPDw+r9XVQ,s=,end=1769844370,limit=3/data=dw0Ypp/state=aXxdZxWl/buffer=702000:1187782,540.1/speed=439838/referer=none,.abxxx.com,.gstatic.com/reftag=329003575/9/121/0/364010760/abxxx/c1/videos/505000/505733/505733.mp4
2026-01-30 12:56:14,290 - src.crawler.network_monitor - DEBUG - Network monitor reset
2026-01-30 12:56:14,418 - src.crawler.browser_manager - INFO - Cleaned up context for chat 8007758080
2026-01-30 12:56:14,424 - src.pooler.download_pooler - ERROR - Download failed for 16: 'BrowserManager' object has no attribute 'close'
2026-01-30 12:56:14,714 - src.pooler.retry_handler - INFO - Download 16 failed (attempt 1/3): 'BrowserManager' object has no attribute 'close'
2026-01-30 12:56:14,715 - src.pooler.retry_handler - INFO - Retrying download 16 in 120s...
2026-01-30 12:58:15,679 - src.pooler.download_pooler - INFO - Processing download 16: playwright
2026-01-30 12:58:15,998 - src.download.direct_downloader - INFO - Crawling page: https://abxxx.com/video/505733/tied-and-fucked-hard-by-two/
2026-01-30 12:58:15,999 - src.crawler.video_detector - INFO - VideoDetector initialized with max_quality=1080p, max_size=2GB
2026-01-30 12:58:16,000 - src.crawler.playwright_crawler - INFO - PlaywrightCrawler initialized with max_quality=1080p
2026-01-30 12:58:17,155 - src.crawler.browser_manager - INFO - Playwright browser launched
2026-01-30 12:58:17,187 - src.crawler.browser_manager - INFO - Created context for chat 8007758080
2026-01-30 12:58:17,323 - src.crawler.playwright_crawler - INFO - Navigating to: https://abxxx.com/video/505733/tied-and-fucked-hard-by-two/
2026-01-30 12:58:22,527 - src.crawler.playwright_crawler - DEBUG - Found video player with selector: video
2026-01-30 12:58:23,150 - src.crawler.network_monitor - DEBUG - Captured video URL: https://s3t3d2y1.afcdn.net/library/900752/38917507fd0a6d05f1881e506c2d7111149235
2026-01-30 12:58:23,189 - src.crawler.network_monitor - DEBUG - Captured video URL: https://s3t3d2y1.afcdn.net/library/900752/dda5bc746e23f414d1fe61421f780230e29fcb
2026-01-30 12:58:23,198 - src.crawler.network_monitor - DEBUG - Captured video URL: https://s3t3d2y1.afcdn.net/library/900752/299c242d35739e14951c55c9a9a92780be790e
2026-01-30 12:58:23,200 - src.crawler.network_monitor - DEBUG - Captured video URL: https://s3t3d2y1.afcdn.net/library/900752/3676a1320704ade391d2db84b58d6d42925325
2026-01-30 12:58:23,278 - src.crawler.network_monitor - DEBUG - Captured video URL: https://s3t3d2y1.afcdn.net/library/900752/299c242d35739e14951c55c9a9a92780be790e
2026-01-30 12:58:23,368 - src.crawler.network_monitor - DEBUG - Captured video URL: https://s3t3d2y1.afcdn.net/library/900752/fd94429f3f03da658031baf9e4c8ab0080788c
2026-01-30 12:58:23,369 - src.crawler.network_monitor - DEBUG - Captured video URL: https://s3t3d2y1.afcdn.net/library/900752/299c242d35739e14951c55c9a9a92780be790e
2026-01-30 12:58:23,370 - src.crawler.network_monitor - DEBUG - Captured video URL: https://s3t3d2y1.afcdn.net/library/900752/5e3525baf09ff1a48dac58eb1ce76f52e4e1a0
2026-01-30 12:58:24,063 - src.crawler.network_monitor - DEBUG - Captured video URL: https://ip386100696.ahcdn.com/key=HvQpY1Bt1ny7DKO1hkZlkA,s=,end=1769844502,limit
2026-01-30 12:58:25,531 - src.crawler.playwright_crawler - INFO - Found 9 video URL candidates
2026-01-30 12:58:25,531 - src.crawler.video_detector - DEBUG - Ad keyword found in URL: https://s3t3d2y1.afcdn.net/library/900752/3676a1320704ade391
2026-01-30 12:58:25,532 - src.crawler.video_detector - INFO - Filtered out likely ad: https://s3t3d2y1.afcdn.net/library/900752/3676a1320704ade391
2026-01-30 12:58:25,532 - src.crawler.video_detector - INFO - Selected best video: 76MB - https://ip386100696.ahcdn.com/key=HvQpY1Bt1ny7DKO1hkZlkA,s=,
2026-01-30 12:58:25,533 - src.crawler.playwright_crawler - INFO - Selected real video: https://ip386100696.ahcdn.com/key=HvQpY1Bt1ny7DKO1hkZlkA,s=,end=1769844502,limit=3/data=hLQx3H/state=aXxdZxWl/buffer=702000:1187782,540.1/speed=439838/referer=none,.abxxx.com,.gstatic.com/reftag=329003575/9/121/0/364010760/abxxx/c1/videos/505000/505733/505733.mp4
2026-01-30 12:58:25,533 - src.crawler.network_monitor - DEBUG - Network monitor reset
2026-01-30 12:58:25,608 - src.crawler.browser_manager - INFO - Cleaned up context for chat 8007758080
2026-01-30 12:58:25,615 - src.pooler.download_pooler - ERROR - Download failed for 16: 'BrowserManager' object has no attribute 'close'
2026-01-30 12:58:25,949 - src.pooler.retry_handler - INFO - Download 16 failed (attempt 2/3): 'BrowserManager' object has no attribute 'close'
2026-01-30 12:58:25,949 - src.pooler.retry_handler - INFO - Retrying download 16 in 240s...
2026-01-30 12:58:29,708 - src.pooler.download_pooler - INFO - Received signal 2, initiating graceful shutdown...
2026-01-30 12:58:30,001 - src.pooler.download_pooler - INFO - Initiating graceful shutdown...
2026-01-30 12:58:30,001 - src.pooler.download_pooler - INFO - Waiting for download 16 to complete...
2026-01-30 12:58:30,002 - src.pooler.download_pooler - INFO - DownloadPooler shutdown complete
2026-01-30 12:58:30,003 - src.pooler.pooler_runner - INFO - Pooler process stopped
2026-01-30 12:58:30,047 - asyncio - ERROR - Future exception was never retrieved
future: <Future finished exception=Exception('Connection closed while reading from the driver')>
Exception: Connection closed while reading from the driver
2026-01-30 12:58:30,047 - asyncio - ERROR - Future exception was never retrieved
future: <Future finished exception=Exception('Connection closed while reading from the driver')>
Exception: Connection closed while reading from the driver
2026-01-30 12:58:30,326 - bot - INFO - Shutting down pooler...
2026-01-30 12:58:30,327 - src.pooler.pooler_runner - INFO - Stopping pooler process...
2026-01-30 12:58:30,327 - src.pooler.pooler_runner - INFO - Pooler process stopped
2026-01-30 12:58:30,327 - bot - INFO - Pooler stopped
2026-01-30 12:59:41,641 - bot - INFO - Starting bot...
2026-01-30 12:59:41,642 - asyncio - DEBUG - Using proactor: IocpProactor
2026-01-30 12:59:42,390 - bot - INFO - Bot is set up. Starting pooler process...
2026-01-30 12:59:42,455 - src.pooler.pooler_runner - INFO - Pooler process started (PID: 15692)
2026-01-30 12:59:42,456 - bot - INFO - Pooler started (PID: 15692)
2026-01-30 12:59:43,119 - src.pooler.pooler_runner - INFO - Starting pooler process...
2026-01-30 12:59:43,120 - src.pooler.pooler_runner - INFO - Database: dev.db
2026-01-30 12:59:43,120 - src.pooler.pooler_runner - INFO - Download dir: /downloads
2026-01-30 12:59:43,122 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7428103787:AAE213JD1aDfHtiM1lIEEPxdL2NnBIIli58
2026-01-30 12:59:43,124 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7428103787:AAE213JD1aDfHtiM1lIEEPxdL2NnBIIli58
2026-01-30 12:59:44,239 - src.pooler.download_pooler - INFO - DownloadPooler initialized
2026-01-30 12:59:44,240 - asyncio - DEBUG - Using proactor: IocpProactor
2026-01-30 12:59:44,241 - src.pooler.download_pooler - INFO - DownloadPooler started
2026-01-30 12:59:44,447 - src.download.direct_downloader - INFO - DirectDownloader: aria2c connected to http://localhost:6800/jsonrpc
2026-01-30 12:59:44,447 - src.pooler.download_pooler - INFO - DirectDownloader initialized
2026-01-30 12:59:44,449 - src.pooler.download_pooler - INFO - TorrentManager initialized
2026-01-30 12:59:57,255 - handlers.dashboard - DEBUG - [DASHBOARD] callback: dm_pause_16 from chat_id=8007758080
2026-01-30 12:59:57,928 - handlers.downloads - INFO - Paused download 16
2026-01-30 13:00:00,845 - handlers.dashboard - DEBUG - [DASHBOARD] callback: dm_resume_16 from chat_id=8007758080
2026-01-30 13:00:01,680 - handlers.downloads - INFO - Resumed download 16
2026-01-30 13:00:08,691 - handlers.dashboard - DEBUG - [DASHBOARD] callback: dashboard_new_download from chat_id=8007758080
2026-01-30 13:00:09,057 - handlers.newurls - INFO - Activated new URL submission mode for chat_id=8007758080
2026-01-30 13:00:14,180 - handlers.newurls - DEBUG - New URL submission received: chat_id=8007758080, text='(.venv) PS D:\Projects\smart-downloader> python ru...'
2026-01-30 13:00:14,181 - download.url_detector - WARNING - Invalid URL format: (.venv) PS D:\Projects\smart-downloader> python ru
2026-01-30 13:00:14,596 - handlers.newurls - DEBUG - New URL submission received: chat_id=8007758080, text='2026-01-30 12:56:12,290 - src.crawler.network_moni...'
2026-01-30 13:00:14,596 - download.url_detector - WARNING - Invalid URL format: 2026-01-30 12:56:12,290 - src.crawler.network_moni
2026-01-30 13:00:20,328 - handlers.newurls - DEBUG - New URL submission received: chat_id=8007758080, text='https://abxxx.com/video/505733/tied-and-fucked-har...'
2026-01-30 13:00:20,773 - download.url_detector - DEBUG - Loaded 1854 yt-dlp extractors
2026-01-30 13:00:20,773 - download.url_detector - DEBUG - URL type: playwright (unsupported video site)
2026-01-30 13:00:20,773 - handlers.newurls - INFO - Adding to queue: url='https://abxxx.com/video/505733/tied-and-fucked-har...', source=playwright, chat_id=8007758080
2026-01-30 13:00:21,141 - handlers.newurls - INFO - Added to queue: queue_id=17
2026-01-30 13:00:21,466 - src.pooler.download_pooler - INFO - Processing download 17: playwright
2026-01-30 13:00:21,763 - src.download.direct_downloader - INFO - Crawling page: https://abxxx.com/video/505733/tied-and-fucked-hard-by-two/
2026-01-30 13:00:21,764 - src.crawler.video_detector - INFO - VideoDetector initialized with max_quality=1080p, max_size=2GB
2026-01-30 13:00:21,764 - src.crawler.playwright_crawler - INFO - PlaywrightCrawler initialized with max_quality=1080p
2026-01-30 13:00:22,967 - src.crawler.browser_manager - INFO - Playwright browser launched
2026-01-30 13:00:22,992 - src.crawler.browser_manager - INFO - Created context for chat 8007758080
2026-01-30 13:00:23,112 - src.crawler.playwright_crawler - INFO - Navigating to: https://abxxx.com/video/505733/tied-and-fucked-hard-by-two/
2026-01-30 13:00:29,250 - src.crawler.playwright_crawler - DEBUG - Found video player with selector: video
2026-01-30 13:00:30,038 - src.crawler.network_monitor - DEBUG - Captured video URL: https://s3t3d2y1.afcdn.net/library/900752/299c242d35739e14951c55c9a9a92780be790e
2026-01-30 13:00:30,258 - src.crawler.network_monitor - DEBUG - Captured video URL: https://s3t3d2y1.afcdn.net/library/900752/299c242d35739e14951c55c9a9a92780be790e
2026-01-30 13:00:30,260 - src.crawler.network_monitor - DEBUG - Captured video URL: https://s3t3d2y1.afcdn.net/library/900752/dda5bc746e23f414d1fe61421f780230e29fcb
2026-01-30 13:00:30,361 - src.crawler.network_monitor - DEBUG - Captured video URL: https://s3t3d2y1.afcdn.net/library/900752/299c242d35739e14951c55c9a9a92780be790e
2026-01-30 13:00:30,614 - src.crawler.network_monitor - DEBUG - Captured video URL: https://s3t3d2y1.afcdn.net/library/900752/299c242d35739e14951c55c9a9a92780be790e
2026-01-30 13:00:30,631 - src.crawler.network_monitor - DEBUG - Captured video URL: https://ip386100696.ahcdn.com/key=MOZSE02rOyp6EBGY3abQYA,s=,end=1769844628,limit
2026-01-30 13:00:30,793 - src.crawler.network_monitor - DEBUG - Captured video URL: https://s3t3d2y1.afcdn.net/library/900752/299c242d35739e14951c55c9a9a92780be790e
2026-01-30 13:00:32,250 - src.crawler.playwright_crawler - INFO - Found 7 video URL candidates
2026-01-30 13:00:32,250 - src.crawler.video_detector - INFO - Selected best video: 76MB - https://ip386100696.ahcdn.com/key=MOZSE02rOyp6EBGY3abQYA,s=,
2026-01-30 13:00:32,251 - src.crawler.playwright_crawler - INFO - Selected real video: https://ip386100696.ahcdn.com/key=MOZSE02rOyp6EBGY3abQYA,s=,end=1769844628,limit=3/data=7aur5i/state=aXxeZxWl/buffer=702000:1187782,540.1/speed=439838/referer=none,.abxxx.com,.gstatic.com/reftag=329003575/9/121/0/364010760/abxxx/c1/videos/505000/505733/505733.mp4
2026-01-30 13:00:32,251 - src.crawler.network_monitor - DEBUG - Network monitor reset
2026-01-30 13:00:32,306 - src.crawler.browser_manager - INFO - Cleaned up context for chat 8007758080
2026-01-30 13:00:32,437 - src.crawler.browser_manager - INFO - Browser cleanup complete
2026-01-30 13:00:32,438 - src.download.direct_downloader - INFO - Downloading crawled video via aria2c: Video.mp4
2026-01-30 13:00:32,438 - src.download.direct_downloader - ERROR - Failed to add to aria2c: 'API' object has no attribute 'add_uri'
2026-01-30 13:00:32,438 - src.pooler.download_pooler - ERROR - Download failed for 17: aria2c add failed: 'API' object has no attribute 'add_uri'
2026-01-30 13:00:32,751 - src.pooler.retry_handler - INFO - Download 17 failed (attempt 1/3): aria2c add failed: 'API' object has no attribute 'add_uri'
2026-01-30 13:00:32,752 - src.pooler.retry_handler - INFO - Retrying download 17 in 120s...
2026-01-30 13:00:53,382 - src.pooler.download_pooler - INFO - Received signal 2, initiating graceful shutdown...
2026-01-30 13:00:53,855 - src.pooler.download_pooler - INFO - Initiating graceful shutdown...
2026-01-30 13:00:53,856 - src.pooler.download_pooler - INFO - Waiting for download 17 to complete...
2026-01-30 13:00:53,856 - src.pooler.download_pooler - INFO - DownloadPooler shutdown complete
2026-01-30 13:00:53,858 - src.pooler.pooler_runner - INFO - Pooler process stopped
2026-01-30 13:00:57,027 - bot - INFO - Shutting down pooler...
2026-01-30 13:00:57,028 - src.pooler.pooler_runner - INFO - Stopping pooler process...
2026-01-30 13:00:57,028 - src.pooler.pooler_runner - INFO - Pooler process stopped
2026-01-30 13:00:57,029 - bot - INFO - Pooler stopped
2026-01-30 13:06:58,473 - bot - INFO - Starting bot...
2026-01-30 13:06:58,474 - asyncio - DEBUG - Using proactor: IocpProactor
2026-01-30 13:06:59,188 - bot - INFO - Bot is set up. Starting pooler process...
2026-01-30 13:06:59,344 - src.pooler.pooler_runner - INFO - Pooler process started (PID: 9256)
2026-01-30 13:06:59,357 - bot - INFO - Pooler started (PID: 9256)
2026-01-30 13:07:00,455 - src.pooler.pooler_runner - INFO - Starting pooler process...
2026-01-30 13:07:00,457 - src.pooler.pooler_runner - INFO - Database: dev.db
2026-01-30 13:07:00,457 - src.pooler.pooler_runner - INFO - Download dir: /downloads
2026-01-30 13:07:00,461 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7428103787:AAE213JD1aDfHtiM1lIEEPxdL2NnBIIli58
2026-01-30 13:07:00,461 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7428103787:AAE213JD1aDfHtiM1lIEEPxdL2NnBIIli58
2026-01-30 13:07:01,817 - src.pooler.download_pooler - INFO - DownloadPooler initialized
2026-01-30 13:07:01,817 - asyncio - DEBUG - Using proactor: IocpProactor
2026-01-30 13:07:01,819 - src.pooler.download_pooler - INFO - DownloadPooler started
2026-01-30 13:07:02,058 - src.download.direct_downloader - INFO - DirectDownloader: aria2c connected to http://localhost:6800/jsonrpc
2026-01-30 13:07:02,058 - src.pooler.download_pooler - INFO - DirectDownloader initialized
2026-01-30 13:07:02,059 - src.pooler.download_pooler - INFO - TorrentManager initialized
2026-01-30 13:07:11,077 - handlers.dashboard - DEBUG - [DASHBOARD] callback: dm_cancel_16 from chat_id=8007758080
2026-01-30 13:07:11,769 - handlers.downloads - INFO - Cancelled download 16
2026-01-30 13:07:20,866 - handlers.dashboard - DEBUG - [DASHBOARD] callback: dm_cancel_17 from chat_id=8007758080
2026-01-30 13:07:21,588 - handlers.downloads - INFO - Cancelled download 17
2026-01-30 13:07:24,712 - handlers.dashboard - DEBUG - [DASHBOARD] callback: dashboard_new_download from chat_id=8007758080
2026-01-30 13:07:25,093 - handlers.newurls - INFO - Activated new URL submission mode for chat_id=8007758080
2026-01-30 13:07:32,253 - handlers.newurls - DEBUG - New URL submission received: chat_id=8007758080, text='https://abxxx.com/video/505733/tied-and-fucked-har...'
2026-01-30 13:07:32,724 - download.url_detector - DEBUG - Loaded 1854 yt-dlp extractors
2026-01-30 13:07:32,727 - download.url_detector - DEBUG - URL type: playwright (unsupported video site)
2026-01-30 13:07:32,727 - handlers.newurls - INFO - Adding to queue: url='https://abxxx.com/video/505733/tied-and-fucked-har...', source=playwright, chat_id=8007758080
2026-01-30 13:07:33,173 - handlers.newurls - INFO - Added to queue: queue_id=18
2026-01-30 13:07:33,500 - src.pooler.download_pooler - INFO - Processing download 18: playwright
2026-01-30 13:07:33,756 - src.download.direct_downloader - INFO - Crawling page: https://abxxx.com/video/505733/tied-and-fucked-hard-by-two/
2026-01-30 13:07:33,756 - src.crawler.video_detector - INFO - VideoDetector initialized with max_quality=1080p, max_size=2GB
2026-01-30 13:07:33,757 - src.crawler.playwright_crawler - INFO - PlaywrightCrawler initialized with max_quality=1080p
2026-01-30 13:07:35,021 - src.crawler.browser_manager - INFO - Playwright browser launched
2026-01-30 13:07:35,044 - src.crawler.browser_manager - INFO - Created context for chat 8007758080
2026-01-30 13:07:35,165 - src.crawler.playwright_crawler - INFO - Navigating to: https://abxxx.com/video/505733/tied-and-fucked-hard-by-two/
2026-01-30 13:07:39,428 - handlers.newurls - INFO - Exited new URL submission mode for chat_id=8007758080
2026-01-30 13:07:45,358 - src.crawler.playwright_crawler - DEBUG - Found video player with selector: video
2026-01-30 13:07:46,907 - src.crawler.network_monitor - DEBUG - Captured video URL: https://s3t3d2y1.afcdn.net/library/900752/299c242d35739e14951c55c9a9a92780be790e
2026-01-30 13:07:47,196 - src.crawler.network_monitor - DEBUG - Captured video URL: https://s3t3d2y1.afcdn.net/library/900752/fd94429f3f03da658031baf9e4c8ab0080788c
2026-01-30 13:07:47,369 - src.crawler.network_monitor - DEBUG - Captured video URL: https://s3t3d2y1.afcdn.net/library/900752/299c242d35739e14951c55c9a9a92780be790e
2026-01-30 13:07:47,860 - src.crawler.network_monitor - DEBUG - Captured video URL: https://s3t3d2y1.afcdn.net/library/900752/299c242d35739e14951c55c9a9a92780be790e
2026-01-30 13:07:48,358 - src.crawler.playwright_crawler - INFO - Found 4 video URL candidates
2026-01-30 13:07:48,359 - src.crawler.video_detector - INFO - Selected best video: 1MB - https://s3t3d2y1.afcdn.net/library/900752/299c242d35739e1495
2026-01-30 13:07:48,360 - src.crawler.playwright_crawler - INFO - Selected real video: https://s3t3d2y1.afcdn.net/library/900752/299c242d35739e14951c55c9a9a92780be790ebb.mp4
2026-01-30 13:07:48,361 - src.crawler.network_monitor - DEBUG - Network monitor reset
2026-01-30 13:07:48,453 - src.crawler.browser_manager - INFO - Cleaned up context for chat 8007758080
2026-01-30 13:07:48,606 - src.crawler.browser_manager - INFO - Browser cleanup complete
2026-01-30 13:07:48,607 - src.download.direct_downloader - INFO - Downloading crawled video via aria2c: Video.mp4
2026-01-30 13:07:48,607 - src.download.direct_downloader - ERROR - Failed to add to aria2c: 'str' object has no attribute 'add_uri'
2026-01-30 13:07:48,607 - src.pooler.download_pooler - ERROR - Download failed for 18: aria2c add failed: 'str' object has no attribute 'add_uri'
2026-01-30 13:07:48,934 - src.pooler.retry_handler - INFO - Download 18 failed (attempt 1/3): aria2c add failed: 'str' object has no attribute 'add_uri'
2026-01-30 13:07:48,934 - src.pooler.retry_handler - INFO - Retrying download 18 in 120s...
2026-01-30 13:08:05,598 - src.pooler.download_pooler - INFO - Received signal 2, initiating graceful shutdown...
2026-01-30 13:08:05,753 - src.pooler.download_pooler - INFO - Initiating graceful shutdown...
2026-01-30 13:08:05,753 - src.pooler.download_pooler - INFO - Waiting for download 18 to complete...
2026-01-30 13:08:05,754 - src.pooler.download_pooler - INFO - DownloadPooler shutdown complete
2026-01-30 13:08:05,755 - src.pooler.pooler_runner - INFO - Pooler process stopped
2026-01-30 13:08:06,199 - bot - INFO - Shutting down pooler...
2026-01-30 13:08:06,200 - src.pooler.pooler_runner - INFO - Stopping pooler process...
2026-01-30 13:08:06,200 - src.pooler.pooler_runner - INFO - Pooler process stopped
2026-01-30 13:08:06,200 - bot - INFO - Pooler stopped
